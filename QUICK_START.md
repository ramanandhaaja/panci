# Quick Start Guide - Phase 3 Complete

## You're Almost Ready!

Phase 3 (Firebase Setup & Persistence) has been implemented. Follow these steps to get the app running:

---

## Step 1: Install FlutterFire CLI (One-Time Setup)

```bash
dart pub global activate flutterfire_cli
```

## Step 2: Configure Firebase

```bash
cd /Users/nandha/Documents/flutter_code/panci
flutterfire configure
```

**What this does:**
- Links your app to your Firebase project
- Generates `lib/firebase_options.dart`
- Configures iOS, Android, and Web

**During configuration:**
1. Select your Firebase project (or create a new one)
2. Select platforms: iOS, Android, Web, macOS (as needed)
3. Wait for configuration to complete

## Step 3: Enable Firebase Services

Go to [Firebase Console](https://console.firebase.google.com):

### Enable Firestore
1. Build > Firestore Database > Create database
2. Choose production mode
3. Select location closest to users
4. Enable

### Enable Anonymous Auth
1. Build > Authentication > Get started
2. Sign-in method > Anonymous > Enable
3. Save

## Step 4: Deploy Security Rules

### Option A: Firebase Console (Easy)
1. Firestore Database > Rules
2. Copy contents from `firestore.rules`
3. Paste and Publish

### Option B: Firebase CLI (Advanced)
```bash
firebase login
firebase init firestore  # Accept defaults
firebase deploy --only firestore:rules
```

## Step 5: Run the App

```bash
flutter run
```

**Expected Console Output:**
```
Firebase initialized successfully
Signed in anonymously with user ID: ABC123...
```

---

## Verify It's Working

1. Create/join a canvas
2. Draw some strokes
3. Check Firebase Console > Firestore Database
   - You should see `canvases/{canvasId}` document
   - With `strokes` array containing your drawings

4. Close and reopen the app
5. Join the same canvas ID
6. Your strokes should be restored

---

## Test Real-Time Sync

1. Open app on two devices (or browser tabs)
2. Join same canvas ID
3. Draw on one device
4. Strokes appear instantly on the other device

---

## Troubleshooting

### Error: "DefaultFirebaseOptions have not been configured"
➜ Run `flutterfire configure`

### Error: "Permission denied"
➜ Enable Anonymous Authentication in Firebase Console
➜ Deploy security rules

### Strokes not saving
➜ Check Firebase Console > Firestore Database for new documents
➜ Check console logs for error messages

---

## What You Can Do Now

✅ Draw on a collaborative canvas
✅ Strokes save to Firebase automatically
✅ Strokes persist after app restart
✅ Real-time sync between devices
✅ Undo/redo syncs across devices
✅ Clear canvas syncs across devices
✅ Offline support (auto-sync when online)

---

## Project Structure

```
lib/
├── main.dart                              # Firebase initialization
├── firebase_options.dart                  # Generated by flutterfire configure
│
├── domain/
│   ├── entities/                         # Business objects
│   │   ├── drawing_data.dart
│   │   └── drawing_stroke.dart
│   └── repositories/
│       └── drawing_repository.dart       # Repository interface
│
├── data/
│   ├── models/                           # JSON serialization
│   │   ├── drawing_data_model.dart
│   │   └── drawing_stroke_model.dart
│   └── repositories/
│       ├── firebase_drawing_repository.dart  # Firestore impl
│       └── repository_provider.dart      # Riverpod provider
│
└── presentation/
    ├── providers/
    │   └── drawing_provider.dart         # State + Firebase
    └── screens/
        └── drawing_canvas_screen.dart    # UI with status indicator
```

---

## Documentation

- **FIREBASE_SETUP.md** - Detailed setup guide
- **PHASE3_IMPLEMENTATION_SUMMARY.md** - Complete implementation details
- **firestore.rules** - Security rules (must be deployed)

---

## Need Help?

Check the troubleshooting section in `FIREBASE_SETUP.md` for detailed solutions.
